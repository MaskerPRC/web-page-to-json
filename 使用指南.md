# 🌐 网页解析工具使用指南

## ✅ 项目已创建完成！

您的完整全栈网页解析工具已经创建完成，包含：

### 🔧 技术栈
- **前端**: Vue 3 + Element Plus + vue-json-pretty
- **后端**: Node.js + Express + Puppeteer + Cheerio  
- **数据库**: SQLite
- **特性**: 智能过滤、CSS选择器格式、隐藏元素检测

### 📁 项目结构
```
web-page-to-json/
├── backend/                 # 后端API服务器
│   ├── database/           # SQLite数据库
│   ├── services/           # 业务逻辑
│   └── server.js           # 服务器入口
├── frontend/               # Vue前端应用
│   ├── src/components/     # 组件
│   ├── src/views/          # 页面
│   └── src/services/       # API服务
├── package.json            # 项目配置
├── start.bat              # Windows启动脚本
└── start.sh               # Linux/Mac启动脚本
```

## 🚀 快速启动

### Windows用户
双击运行 `start.bat` 文件，或在命令行执行：
```cmd
.\start.bat
```

### Linux/Mac用户
```bash
chmod +x start.sh
./start.sh
```

### 手动启动
```bash
# 1. 安装依赖
npm run install:all

# 2. 初始化数据库
npm run init:db

# 3. 启动后端（端口3025）
cd backend && npm start

# 4. 启动前端（端口8080，新终端）
cd frontend && npm run serve
```

## 🌟 功能特性

### 🎯 智能解析
1. **输入网址**: 在首页输入要解析的URL
2. **一键解析**: 点击"开始解析"按钮
3. **实时进度**: 显示解析进度和状态
4. **结果展示**: 美化显示JSON结果

### 📊 数据格式
```json
[
  {
    "div#header.navigation": [
      {
        "type": "h1", 
        "classes": ["logo"],
        "text": "网站标题"
      },
      {
        "type": "img",
        "image": "https://example.com/logo.png"
      }
    ]
  },
  {
    "type": "p",
    "text": "页面内容"
  }
]
```

### 🔧 核心功能
- ✅ **智能过滤**: 自动过滤Bootstrap、Tailwind CSS样式类
- ✅ **隐藏元素检测**: 过滤display:none、visibility:hidden等
- ✅ **CSS选择器格式**: 容器元素使用简洁的选择器格式
- ✅ **JSON美化**: 支持语法高亮、折叠、搜索
- ✅ **历史记录**: 保存所有解析记录
- ✅ **统计分析**: 显示解析成功率、性能指标
- ✅ **缓存机制**: 避免重复解析

## 📱 界面功能

### 🏠 首页 (http://localhost:8080)
- URL输入和解析
- 快速示例链接
- 解析进度显示
- 结果展示和操作

### 📚 解析历史 (/history)
- 查看所有解析记录
- 搜索和筛选
- 删除记录
- 查看详细结果

### 📊 统计信息 (/stats)  
- 解析成功率
- 平均解析时间
- 系统状态检查
- 性能指标

### 🔍 结果页面 (/result/:id)
- JSON语法高亮
- 折叠/展开控制
- 复制/下载功能
- 节点详细信息

## 🔧 API接口

### 解析网页
```http
POST /api/parse
Content-Type: application/json

{
  "url": "https://example.com"
}
```

### 获取历史
```http
GET /api/history?page=1&limit=20
```

### 获取统计
```http
GET /api/stats
```

### 健康检查
```http
GET /api/health
```

## ⚡ 性能优化

### 缓存机制
- 相同URL 24小时内返回缓存结果
- 显著减少重复解析时间

### 速率限制
- 普通API: 15分钟内最多100次请求
- 解析API: 1分钟内最多10次请求

### 内存优化
- 自动清理无用DOM元素
- 智能过滤减少数据体积

## 🛠️ 自定义配置

### 后端配置 (backend/.env)
```env
PORT=3025
PARSE_TIMEOUT=30250
PARSE_CACHE_DURATION=86400000
```

### 前端配置 (frontend/.env)
```env
VUE_APP_API_BASE_URL=http://localhost:3025/api
VUE_APP_TITLE=网页解析工具
```

## 🔍 故障排除

### 常见问题

**Q: 解析失败怎么办？**
A: 检查网络连接，确认目标网站可访问，查看错误日志

**Q: 前端无法访问后端？**  
A: 确认后端服务已启动，检查端口3025是否被占用

**Q: 数据库错误？**
A: 重新运行 `npm run init:db` 初始化数据库

**Q: 解析速度慢？**
A: 复杂页面需要时间加载，可查看统计页面了解平均时间

### 日志查看
```bash
# 后端日志
cd backend && npm run dev

# 检查服务状态
curl http://localhost:3025/api/health
```

## 🎨 定制化

### 添加新的过滤规则
修改 `backend/services/webParser.js` 中的 `filterStyleClasses` 方法

### 自定义JSON格式
修改 `parseElement` 方法中的数据结构生成逻辑

### 界面主题
修改 `frontend/src/styles/variables.scss` 中的颜色变量

## 📈 扩展功能

### 建议的增强功能
- [ ] 支持批量URL解析
- [ ] 导出多种格式（XML、CSV）
- [ ] 添加解析规则配置
- [ ] 支持定时任务
- [ ] 添加用户认证
- [ ] 解析结果对比
- [ ] 移动端适配优化

### 部署到生产环境
```bash
# 构建前端
cd frontend && npm run build

# 配置反向代理（Nginx）
# 配置环境变量
# 配置进程管理（PM2）
```

## 🤝 技术支持

如需技术支持或有任何问题，请检查：
1. Node.js版本 >= 16.0.0
2. 网络连接状态
3. 端口占用情况
4. 依赖安装完整性

---

🎉 **恭喜！您的智能网页解析工具已经准备就绪！**

现在您可以：
1. 启动应用并访问 http://localhost:8080
2. 输入任意网址进行解析测试
3. 查看美化的JSON结果
4. 管理解析历史和统计数据

祝您使用愉快！ 🚀
